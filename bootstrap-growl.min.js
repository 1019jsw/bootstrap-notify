/* Project: Bootstrap Growl = v3.0.0b | Description: Turns standard Bootstrap alerts into "Growl-like" notifications. | Author: Mouse0270 aka Robert McIntosh | License: MIT License | Website: https://github.com/mouse0270/bootstrap-growl */
(function(e,t,n,r){function o(t,n,r){var n={content:{message:typeof n=="object"?n.message:n,title:n.title?n.title:"",icon:n.icon?n.icon:"",url:n.url?n.url:"#",target:n.target?n.target:"-"}};r=e.extend(true,{},n,r);this.settings=e.extend(true,{},s,r);this._defaults=s;if(this.settings.content.target=="-"){this.settings.content.target=this.settings.url_target}this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"};if(typeof this.settings.offset=="number"){this.settings.offset={x:this.settings.offset,y:this.settings.offset}}this.init()}var i="growl",s={element:"body",position:null,type:"info",allow_dismiss:true,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:false,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onHide:null,onHidden:null,icon_type:"class",template:'<div data-growl="container" class="col-xs-11 col-sm-3 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-growl="dismiss">&times;</button><span data-growl="icon"></span> <span data-growl="title">{1}</span> <span data-growl="message">{2}</span><div class="progress" data-growl="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-growl="url"></a></div>'};String.format=function(){var e=arguments[0];for(var t=1;t<arguments.length;t++){e=e.replace(RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t])}return e};e.extend(o.prototype,{init:function(){var e=this;this.buildGrowl();if(this.settings.content.icon){this.setIcon()}if(this.settings.content.url!="#"){this.styleURL()}this.placement();this.bind();this.growl={$ele:this.$ele,update:function(t,n){switch(t){case"type":this.$ele.removeClass(function(e,t){return(t.match(/(^|\s)alert-\S+/g)||[]).join(" ")});this.$ele.find('[data-growl="progressbar"] > .progress-bar').removeClass(function(e,t){return(t.match(/(^|\s)progress-bar-\S+/g)||[]).join(" ")});this.$ele.addClass("alert-"+n).find('[data-growl="progressbar"] > .progress-bar').addClass("progress-bar-"+n);break;case"icon":var r=this.$ele.find('[data-growl="icon"]');if(e.settings.icon_type.toLowerCase()=="class"){r.removeClass(e.settings.content.icon).addClass(n)}else{if(!r.is("img")){r.find("img")}r.attr("src",n)}break;case"url":this.$ele.find('[data-growl="url"]').attr("href",n);break;case"target":this.$ele.find('[data-growl="url"]').attr("target",n);break;default:this.$ele.find('[data-growl="'+t+'"]').html(n)}var i=this.$ele.outerHeight()+parseInt(e.settings.spacing)+parseInt(e.settings.offset.y);e.reposition(i)},close:function(){e.close()}}},buildGrowl:function(){var t=this.settings.content;this.$ele=e(String.format(this.settings.template,this.settings.type,t.title,t.message,t.url,t.target));this.$ele.attr("data-growl-position",this.settings.placement.from+"-"+this.settings.placement.align);if(!this.settings.allow_dismiss){this.$ele.find('[data-growl="dismiss"]').css("display","none")}if(this.settings.delay<=0){this.$ele.find('[data-growl="progressbar"]').remove()}},setIcon:function(){if(this.settings.icon_type.toLowerCase()=="class"){this.$ele.find('[data-growl="icon"]').addClass(this.settings.content.icon)}else{if(this.$ele.find('[data-growl="icon"]').is("img")){this.$ele.find('[data-growl="icon"]').attr("src",this.settings.content.icon)}else{this.$ele.find('[data-growl="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Growl Icon" />')}}},styleURL:function(){this.$ele.find('[data-growl="url"]').css({height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var t=this,n=this.settings.offset.y,r={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:this.settings.element==="body"?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},i=false,s=this.settings;e('[data-growl-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return n=Math.max(n,parseInt(e(this).css(s.placement.from))+e(this).outerHeight()+s.spacing)});r[this.settings.placement.from]=n+"px";switch(this.settings.placement.align){case"left":case"right":r[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":r.left=0;r.right=0;break}this.$ele.css(r).addClass(this.settings.animate.enter);e(this.settings.element).append(this.$ele);if(e.isFunction(t.settings.onShow)){t.settings.onShow.call(this.$ele)}this.$ele.one(this.animations.start,function(e){i=true}).one(this.animations.end,function(n){if(e.isFunction(t.settings.onShown)){t.settings.onShown.call(this)}});setTimeout(function(){if(!i){if(e.isFunction(t.settings.onShown)){t.settings.onShown.call(this)}}},600)},bind:function(){var t=this;this.$ele.find('[data-growl="dismiss"]').on("click",function(){t.close()});this.$ele.mouseover(function(t){e(this).data("data-hover","true")}).mouseout(function(t){e(this).data("data-hover","false")});if(this.settings.delay>0){t.$ele.data("growl-delay",t.settings.delay);var n=setInterval(function(){var e=parseInt(t.$ele.data("growl-delay"))-t.settings.timer;if(!t.$ele.data("data-hover")=="true"&&t.settings.mouse_over=="pause"||t.settings.mouse_over!="pause"){var r=(t.settings.delay-e)/t.settings.delay*100;t.$ele.data("growl-delay",e);t.$ele.find('[data-growl="progressbar"] > div').attr("aria-valuenow",r).css("width",r+"%")}if(e<=0){clearInterval(n);t.close()}},t.settings.timer)}},close:function(){var t=this,n=null,r=this.$ele.css(this.settings.placement.from),i=false;this.$ele.data("closing","true").addClass(this.settings.animate.exit);this.reposition(r);if(e.isFunction(t.settings.onHide)){t.settings.onHide.call(this.$ele)}this.$ele.one(this.animations.start,function(e){i=true}).one(this.animations.end,function(n){e(this).remove();if(e.isFunction(t.settings.onHidden)){t.settings.onHidden.call(this)}});setTimeout(function(){if(!i){t.$ele.remove();if(t.settings.onHidden){t.settings.onHidden(t.$ele)}}},600)},reposition:function(t){var n=this;this.$ele.nextAll('[data-growl-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){e(this).css(n.settings.placement.from,t);t=parseInt(t)+n.settings.spacing+e(this).outerHeight()})}});e.growl=function(e,t){if(e==false&&t.command=="closeAll"){if(t.command=="closeAll"){}else{}return false}else{var n=new o(this,e,t);return n.growl}}})(jQuery,window,document)